### 数字签名

#### 常用算法
- 基于非对称加密算法，如RSA等
   - 数字签名通常定义了两种运算：签名和验签。发送者用自己的私钥对消息的哈希值进行签名，接收者用对方的公钥进行验签。因此，在使用数字签名时，需要通信的双方都要事先生成公钥、私钥，并且完成双方的公钥交换。其中，私钥是只能由拥有者使用的不公开密钥，公钥是可以公开的密钥。
   - 由于公钥本身并不含有拥有者的身份信息，使用时无法确认它是真实有效的。所以需要证书认证机构（简称 CA）在核实公钥拥有者的信息后，将公钥拥有者的身份信息（如商户号、公司名称等），公钥、签发者信息、有效期以及扩展信息等进行签名，制作成“证书”。
- 基于带消息认证码的消息摘要算法，如HmacSHA256等，HMAC -> Hash-based Message Authentication Code
    - 为了防止彩虹表攻击，我们通常会在进行消息摘要时加上盐值，这样看似相同的输入，却是完全不同的结果，因为在进行消息摘要前我们将要摘要的数据混入了盐值，这样得出的哈希值将很难推导出明文
    - 那么现在带消息认证码的消息摘要算法就是为了提供更统一的、更安全的、类似加盐值操作的消息摘要而诞生的
- 基于消息摘要算法，如MD5、SHA256等，MD：Message Digest，SHA：Secure Hash Algorithm
    - 不同的数据用相同的消息摘要算法计算出的哈希值长度一致
    - MD5公认已经不安全，主要是因为生成的哈希值太短，更容易出现哈希碰撞
    - 实际上微信支付一直用MD5签名，在微信支付的参数中有随机数和时间戳的加入，而且在HTTPS环境中
    - SHA相对更安全，因为生成的哈希值较长，且有多种可选，如SHA1、SHA256、SHA512等
    
#### 实际应用
- 阿里云短信接口数据签名，使用HmacSHA1，密钥和签名是Base64字符串
- 支付宝支付接口数据签名，使用RSA或RSA256，密钥和签名是Base64字符串
- 微信支付V2接口数据签名，支持MD5或HMacSHA256，密钥和签名是16进制字符串
- 微信支付V3接口数据签名，使用sha256WithRSA，密钥和签名是Base64字符串
- Token签名，一般用HMacSHA256，也可用非对称签名算法，密钥和签名是Base64字符串