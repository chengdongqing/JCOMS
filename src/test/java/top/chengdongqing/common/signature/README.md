### 数字签名

#### 常用算法
- 基于非对称加密算法，如RSA等
   - 一般是由非对称加密算法和消息摘要算法组成
   - 也就是先通过消息摘要算法计算出将要签名的数据的哈希值，然后通过非对称加密算法对哈希值进行加密，这个加密后的密文就是数字签名
   - 为什么密文就是签名呢？因为非对称加密是通过私钥进行加密，通过公钥解密，那么我们生成的签名发送给合作伙伴的服务器，他们用我们给他们提供的公钥和发送过去的内容进行验签
   - 验签具体流程是怎样呢？合作伙伴将要验证的数据用同样的消息摘要算法计算哈希值，然后用我们给他们的公钥将密文解密，最后对比这两个哈希值是否一样
- 基于带消息认证码的消息摘要算法，如HmacSHA256等，HMAC -> Hash-based Message Authentication Code
    - 为了防止彩虹表攻击，我们通常会在进行消息摘要时加上盐值，这样看似相同的输入，却是完全不同的结果，因为在进行消息摘要前我们将要摘要的数据混入了盐值，这样得出的哈希值将很难推导出明文
    - 那么现在带消息认证码的消息摘要算法就是为了提供更统一的、更安全的、类似加盐值操作的消息摘要而诞生的
    - 我们可以根据Java自带的相关api自动生成相关密钥。调用相关api并传入要摘要的内容和密钥即可执行消息摘要，这里的密钥就是消息认证码
- 基于消息摘要算法，如MD5、SHA256等，MD -> Message Digest，SHA -> Secure Hash Algorithm
    - MD5公认已经不安全，主要是因为生成的哈希值太短，更容易出现哈希碰撞
    - 实际上微信支付一直用MD5签名，为什么呢？在微信支付的参数中有随机数和时间戳的加入，就算不加入每次的数据都是不同的，而且在HTTPS环境中，几乎没有数据被篡改的可能
    - SHA256更安全，因为生成的哈希值较长，且可以调整，如SHA1、SHA256、SHA512等
    
#### 实际应用
- 阿里云短信接口签名，支持HmacSHA1，且密钥和签名是Base64形式的
- 支付宝支付接口签名，支持RSA或RSA256，且密钥和签名是Base64形式的
- 微信支付接口签名，支持MD5或HmacSHA256，且密钥和签名是16进制的
- Token签名，一般用HmacSHA256，也可用对称签名算法，且密钥和签名是Base64形式的